<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tech Safe ‚Ä¢ Disaster Preparedness Gear</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Define a custom theme and gradients using CSS variables for complex elements */
        
         :root {
            --bg-start: #0f172a;
            /* Deeper slate */
            --bg-end: #020617;
            /* Darkest slate */
            --accent-light: #6EE7B7;
            /* Emerald-300 */
            --accent-dark: #34d399;
            /* Emerald-500 */
            --primary: #818cf8;
            /* Indigo-400 */
        }
        /* Essential resets and base styles */
        
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            position: relative;
            /* Enables the ::before pseudo-element */
        }
        /* Dark overlay for better text readability and maintaining the dark theme 
            *** UPDATED: Now uses the disaster illustration image with a dark overlay *** */
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            /* Set image, assuming it's named 'likod.png' and is in the same folder */
            /* NOTE: If likod.png isn't available, the image likod.jpg you uploaded may be used instead. */
            background: url('likod.png') no-repeat center center fixed;
            background-size: cover;
            /* Overlay to darken the image and blend with the dark theme */
            opacity: 1;
            z-index: -1;
            /* Add a dark, transparent color layer on top of the image (70% opacity black) */
            box-shadow: inset 0 0 0 1000px rgba(0, 0, 0, 0.7);
        }
        /* Custom style for the fixed header with backdrop blur */
        
        .sticky-header {
            /* Kept the same opacity for header */
            background-color: rgba(15, 23, 42, 0.85);
            /* slate-900 with 85% opacity */
            backdrop-filter: blur(8px);
        }
        /* --- ORB ANIMATION STYLES (Removed to make way for the video) --- */
        
        .visual {
            position: relative;
            height: 380px;
            overflow: hidden;
            /* We will remove this section as it's replaced by the video */
        }
        /* Keeping orb and floating styles for completeness in case you want to use them elsewhere, 
            but they are no longer in the HTML structure for the home section */
        
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(35px);
            transform: translate(-50%, -50%);
            mix-blend-mode: screen;
            opacity: 0.9;
            animation: moveOrbs 12s infinite alternate ease-in-out;
            will-change: transform;
        }
        
        .orb.one {
            background: linear-gradient(135deg, #7c3aed, #06b6d4);
            left: 20%;
            top: 30%;
            width: 140px;
            height: 140px;
            animation-delay: 0s;
        }
        
        .orb.two {
            background: linear-gradient(135deg, #34d399, #60a5fa);
            left: 80%;
            top: 70%;
            width: 200px;
            height: 200px;
            animation-delay: -4s;
        }
        
        .orb.three {
            background: linear-gradient(135deg, #f97316, #f472b6);
            left: 55%;
            top: 20%;
            width: 100px;
            height: 100px;
            animation-delay: -8s;
        }
        
        @keyframes moveOrbs {
            0% {
                transform: translate(-50%, -50%) translate(0, 0);
            }
            100% {
                transform: translate(-50%, -50%) translate(100px, 50px);
            }
        }
        /* Hide native scrollbars while still allowing scrolling */
        
        .no-scrollbar {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }
        
        .no-scrollbar::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari, Opera */
        }
        
        .floating {
            position: absolute;
            will-change: transform;
            transition: transform 0.05s ease-out;
        }
        
        .floating.f1 {
            top: 15%;
            left: 10%;
        }
        
        .floating.f2 {
            top: 85%;
            left: 90%;
        }
        
        .floating.f3 {
            top: 50%;
            left: 40%;
        }
        
        .floating.f4 {
            top: 65%;
            left: 15%;
        }
        
        .floating.f5 {
            top: 25%;
            left: 80%;
        }
        
        .floating.f6 {
            top: 80%;
            left: 45%;
        }
        
        .floating.f7 {
            top: 30%;
            left: 60%;
        }
        /* Responsive overrides for sections */
        
        section {
            min-height: calc(100vh - 84px);
            display: grid;
            align-items: center;
        }
        /* Panel specific styles (UPDATED FOR SCROLLABILITY) */
        
        .slide-panel {
            position: fixed;
            right: -400px;
            top: 0;
            width: 350px;
            max-width: 90vw;
            height: 100vh;
            background: #0f172a;
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            /* KEY CHANGE: Add Flexbox to manage header and scrollable content */
            padding: 0 20px 20px 20px;
            /* Only bottom/left/right padding, header padding is handled in HTML */
            display: flex;
            /* Enable flexbox */
            flex-direction: column;
            /* Stack children vertically */
            transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Smoother transition */
            z-index: 999;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
        }
        
        .slide-panel.open {
            right: 0;
        }
        /* --- PRODUCT IMAGE PREVIEW STYLES (Kept, but moved logic to JS) --- */
        
        .image-preview {
            position: fixed;
            top: 50%;
            /* Hidden position: Off-screen to the right, far enough to not flicker */
            right: -300px;
            transform: translateY(-50%);
            width: 288px;
            /* w-72 */
            height: 288px;
            /* h-72 */
            background: rgba(15, 23, 42, 0.9);
            /* slate-900 with 90% opacity */
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            /* rounded-2xl */
            padding: 1rem;
            /* p-4 */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0;
            pointer-events: none;
            transition: right 0.4s ease-in-out, opacity 0.4s ease-in-out;
            z-index: 500;
        }
        
        .image-preview.visible {
            right: 380px;
            /* Repositioned to show next to the slide panel (350px wide + 30px gap) */
            opacity: 1;
        }
        /* --- FLOATING CARD POSITIONS --- */
        
        .floating {
            position: absolute;
            will-change: transform;
            transition: transform 0.05s ease-out;
        }
        
        .floating.f1 {
            top: 15%;
            left: 10%;
        }
        
        .floating.f2 {
            top: 85%;
            left: 90%;
        }
        
        .floating.f3 {
            top: 50%;
            left: 40%;
        }
        
        .floating.f4 {
            top: 65%;
            left: 15%;
        }
        
        .floating.f5 {
            top: 25%;
            left: 80%;
        }
        
        .floating.f6 {
            top: 80%;
            left: 45%;
        }
        
        .floating.f7 {
            top: 30%;
            left: 60%;
        }
        /* --- CAROUSEL SPECIFIC STYLES --- */
        /* Container for the carousel to hide overflowing images */
        
        #goBagImageCarouselContainer {
            overflow: hidden;
        }
        /* The inner track that holds the images */
        
        #goBagImageCarousel {
            display: flex;
            /* w-[300%] is 3 times the container width (3 images) */
            width: 300%;
            transition: transform 0.3s ease-in-out;
        }
        /* The image elements inside the carousel */
        
        #goBagImageCarousel img {
            width: 33.3333%;
            flex-shrink: 0;
        }
        /* Highlight for the 'Standard' feature label */
        
        .standard-label {
            font-size: 1.05rem;
            font-weight: 700;
            color: var(--accent-light);
        }
    </style>
</head>

<body class="text-slate-100">

    <header class="fixed top-0 left-0 right-0 flex items-center justify-between px-4 py-3 shadow-lg z-50 sticky-header">

        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 rounded-xl overflow-hidden flex items-center justify-center">
                <img src="logs.png" alt="Tech Safe Logo" class="w-full h-full object-cover">
            </div>
            <div>
                <div class="font-extrabold text-xl leading-none">Tech Safe</div>
                <div class="text-xs text-slate-400 mt-0.5">Stay safe. Stay connected. Be ready.</div>
            </div>
        </div>

        <nav id="mainNav" class="hidden sm:flex space-x-2 p-1 bg-white/5 rounded-full shadow-inner">
            <a href="#home" class="nav-link text-slate-300 hover:text-slate-900 hover:bg-slate-100 px-4 py-2 rounded-full font-semibold transition-colors duration-300">Home</a>
            <a href="#about" class="nav-link text-slate-300 hover:text-slate-900 hover:bg-slate-100 px-4 py-2 rounded-full font-semibold transition-colors duration-300">About</a>
            <a href="#order" class="nav-link text-slate-300 hover:text-slate-900 hover:bg-slate-100 px-4 py-2 rounded-full font-semibold transition-colors duration-300">Order</a>
            <a href="#contact" class="nav-link text-slate-300 hover:text-slate-900 hover:bg-slate-100 px-4 py-2 rounded-full font-semibold transition-colors duration-300">Contact</a>
            <button id="feedbackButton" class="text-slate-300 hover:text-slate-900 hover:bg-slate-100 px-4 py-2 rounded-full font-semibold transition-colors duration-300">Feedback</button>
        </nav>

    </header>

    <main class="pt-20">

        <section id="home" class="px-4 py-16">
            <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-10 items-center">

                <div class="p-6 rounded-3xl bg-slate-800/20 backdrop-blur-sm shadow-xl border border-white/5">
                    <h1 class="text-5xl font-extrabold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-white to-sky-300">
                        Welcome To Tech Safe
                    </h1>

                    <p class="text-lg text-slate-300 mb-6">
                        "Welcome to Tech Safe: Your source for smart, reliable emergency gear that connects you to safety."
                    </p>

                    <button id="exploreButton" class="inline-block px-8 py-3 rounded-xl font-bold transition duration-300
                                bg-gradient-to-r from-emerald-400 to-sky-400 text-slate-900 shadow-xl shadow-emerald-500/30
                                hover:shadow-lg hover:from-emerald-300 hover:to-sky-300">
                        Explore Our Gear ‚Üí
                    </button>
                </div>

                <div class="w-full rounded-3xl bg-slate-800/20 shadow-xl border border-white/5 overflow-hidden relative">
                    <video id="heroVideo" class="w-full h-65 object-cover" autoplay muted playsinline>
                        <source src="vae.mp4" src="" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>


                    <!-- Picture-in-picture overlay video -->
                    <video id="pipVideo" class="absolute bottom-1 right-2 w-40 h-24 object-cover rounded-lg shadow-lg" autoplay muted playsinline>
                        <source src="bagcircle.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>

                    <!-- Post-video horizontal gallery (hidden until hero video ends) -->
                    <div id="postVideoGallery" class="hidden w-full h-64 overflow-x-auto">
                        <div class="flex space-x-4 p-4">
                            <img src="iraldg.png" alt="Photo 1" class="w-80 h-56 object-cover rounded-lg shadow-md">
                            <img src="iraldor.png" alt="Photo 2" class="w-80 h-56 object-cover rounded-lg shadow-md">

                        </div>
                    </div>

                    <button id="replayVideoBtn" class="hidden absolute inset-x-0 bottom-0 mx-auto mb-4 px-4 py-2 rounded bg-white/10 text-slate-100">Play Video Again</button>

                    <!-- Model image feature removed -->
                </div>
            </div>
        </section>

        <section id="about" class="px-4 py-16">
            <div class="max-w-6xl mx-auto">
                <div class="p-8 rounded-3xl bg-slate-800/20 backdrop-blur-sm shadow-xl border border-white/5">

                    <h2 class="text-4xl font-extrabold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-white to-emerald-300">
                        About Tech Safe</h2>

                    <p class="text-lg text-slate-300 mb-8 max-w-3xl">
                        TechSafe creates practical and tech-ready solutions to help Filipinos stay prepared for emergencies. Our Smart Disaster Go Bag is designed to give families and individuals the basic tools and smart features they need to stay safe, connected, and ready
                        during unexpected situations.

                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">

                        <div class="p-6 rounded-2xl bg-slate-900 hover:bg-slate-700/50 transition-colors duration-300 cursor-pointer shadow-lg hover:shadow-emerald-500/20" id="openProducts">
                            <strong class="text-xl font-bold">Products üì¶</strong>
                            <div class="text-sm text-slate-400 mt-2">Click to view our innovative emergency gear.</div>
                        </div>

                        <div class="p-6 rounded-2xl bg-slate-900 hover:bg-slate-700/50 transition-colors duration-300 cursor-pointer shadow-lg hover:shadow-sky-500/20" id="openMembers">
                            <strong class="text-xl font-bold">The Team üßë‚Äçüíª</strong>
                            <div class="text-sm text-slate-400 mt-2">Click to meet the contributors behind Tech Safe.</div>
                        </div>

                        <div class="p-6 rounded-2xl bg-slate-900 hover:bg-slate-700/50 transition-colors duration-300 cursor-pointer shadow-lg hover:shadow-indigo-500/20" id="openFocus">
                            <strong class="text-xl font-bold">Why Choose us? üí°</strong>
                            <div class="text-sm text-slate-400 mt-2">‚ÄúStay Safe. Stay Connected. Be Ready.‚Äù</div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <section id="order" class="px-4 py-16">
            <div class="max-w-2xl mx-auto">
                <div class="p-8 rounded-3xl bg-slate-800/20 backdrop-blur-sm shadow-xl border border-white/5">

                    <h2 class="text-4xl font-extrabold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-white to-orange-300">
                        Place Your Order üõçÔ∏è</h2>

                    <p class="text-lg text-slate-300 mb-6">Fill out the details below to secure your Tech Safe gear.</p>

                    <form id="orderForm" class="space-y-4">
                        <label for="product" class="block text-sm font-semibold text-slate-200">Product to
                            Order</label>
                        <input type="text" id="product" name="product" value="Smart Disaster Go Bag (Example)" required class="w-full p-3 rounded-lg border border-slate-700 bg-slate-900 text-white placeholder-slate-500 focus:border-emerald-400 focus:ring focus:ring-emerald-400/30 transition-colors">

                        <label for="city" class="block text-sm font-semibold text-slate-200">City</label>
                        <input type="text" id="city" name="city" placeholder="e.g., Cebu City" required class="w-full p-3 rounded-lg border border-slate-700 bg-slate-900 text-white placeholder-slate-500 focus:border-emerald-400 focus:ring focus:ring-emerald-400/30 transition-colors">

                        <label for="address" class="block text-sm font-semibold text-slate-200">Complete Delivery
                            Address</label>
                        <input type="text" id="address" name="address" placeholder="House/Bldg No., Street Name, Barangay" required class="w-full p-3 rounded-lg border border-slate-700 bg-slate-900 text-white placeholder-slate-500 focus:border-emerald-400 focus:ring focus:ring-emerald-400/30 transition-colors">

                        <label for="email" class="block text-sm font-semibold text-slate-200">Gmail/Email</label>
                        <input type="email" id="email" name="email" placeholder="youremail@gmail.com" required class="w-full p-3 rounded-lg border border-slate-700 bg-slate-900 text-white placeholder-slate-500 focus:border-emerald-400 focus:ring focus:ring-emerald-400/30 transition-colors">

                        <button type="submit" class="w-full mt-6 px-8 py-3 rounded-xl font-bold transition duration-300
                                                bg-gradient-to-r from-emerald-400 to-sky-400 text-slate-900 shadow-xl shadow-emerald-500/30
                                                hover:shadow-lg hover:from-emerald-300 hover:to-sky-300">
                            Submit Order
                        </button>

                        <div id="successMessage" class="hidden mt-4 p-3 bg-emerald-900/50 border border-emerald-400 rounded-lg text-emerald-200 font-medium">
                            Order submitted successfully! We will contact you soon.
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="contact" class="px-4 py-16">
            <div class="max-w-xl mx-auto">
                <div class="p-8 rounded-3xl bg-slate-800/20 backdrop-blur-sm shadow-xl border border-white/5 text-center">

                    <h2 class="text-4xl font-extrabold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-white to-purple-300">
                        Get in Touch üëã</h2>

                    <p class="text-xl font-semibold mb-2 text-slate-200">TechSafe@gmail.com</p>

                    <p class="text-xl font-semibold mb-1 text-slate-200">+63 935 4694 362</p>
                    <p class="text-xl font-semibold mb-1 text-slate-200">Facebook TechSafe PH</p>

                    <div class="space-y-2 text-sm text-slate-400">
                        <p>We are based in Calindagan, Dumaguete City.</p>
                        <p>Your safety is our priority.</p>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <footer class="py-6 px-4 text-center text-sm text-slate-500 border-t border-slate-800">
        ¬© <span id="year"></span> Tech Safe. All rights reserved.
    </footer>

    <div id="imagePreview" class="image-preview">
        <img id="previewImage" src="" alt="Product Preview" class="w-full h-full object-cover rounded-xl">
        <p id="previewTitle" class="text-center text-sm font-semibold mt-2"></p>
    </div>

    <div id="productPanel" class="slide-panel">
        <div class="flex justify-between items-center mb-6 flex-shrink-0 pt-5 pr-2">
            <h3 id="productPanelTitle" class="text-2xl font-extrabold">üì¶ Our Products</h3>
            <button id="closeProduct" class="text-sm font-semibold text-red-400 hover:text-red-300 transition-colors">
                Close (X)
            </button>
        </div>

        <div id="panelContentContainer" class="flex-grow overflow-y-auto pr-2">

            <div id="productListView" class="space-y-4">
                <div class="product-item p-4 bg-slate-900 rounded-xl border border-emerald-500/30 shadow-md cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="goBag" data-image="bag.png" data-title="Smart Go Bag" data-color="emerald">
                    <strong class="block text-lg">Smart Go Bag Standard/Bundle/LGU</strong>
                    <p class="text-sm text-slate-400 mb-1">Tech-integrated emergency kit with smart tracking.</p>
                    <span class="text-xs text-emerald-400 font-semibold">Click for details or hover for image ‚Üí</span>
                </div>

                <div class="product-item p-4 bg-slate-900 rounded-xl border border-sky-500/30 shadow-md cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="powerbank" data-image="solar.png" data-title="Solar Powerbank" data-color="sky">
                    <strong class="block text-lg">Solar Powerbank</strong>
                    <p class="text-sm text-slate-400 mb-1">High-capacity powerbank with built-in solar charging.</p>
                    <span class="text-xs text-sky-400 font-semibold">Click for details or hover for image ‚Üí</span>
                </div>

                <div class="product-item p-4 bg-slate-900 rounded-xl border border-indigo-500/30 shadow-md cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="radio" data-image="https://placehold.co/400x400/6366F1/1F2937?text=Mini+Radio" data-title="Emergency Mini Radio"
                    data-color="indigo">
                    <strong class="block text-lg">Emergency Mini Radio</strong>
                    <p class="text-sm text-slate-400 mb-1">Handheld, crank-powered AM/FM radio for crucial updates.</p>
                    <span class="text-xs text-indigo-400 font-semibold">Click for details or hover for image ‚Üí</span>
                </div>
                <div class="product-item p-4 bg-slate-900 rounded-xl border border-gray-500/30 shadow-md cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="waterFilter" data-image="https://placehold.co/400x400/9CA3AF/1F2937?text=Water+Filter" data-title="Portable Water Filter"
                    data-color="gray">
                    <strong class="block text-lg">Portable Water Filter</strong>
                    <p class="text-sm text-slate-400 mb-1">Personal water filter straw for clean drinking water.</p>
                    <span class="text-xs text-gray-400 font-semibold">Click for details or hover for image ‚Üí</span>
                </div>
                <div class="product-item p-4 bg-slate-900 rounded-xl border border-yellow-500/30 shadow-md cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="blankets" data-image="https://placehold.co/400x400/F59E0B/1F2937?text=Emergency+Blanket" data-title="Thermal Blankets"
                    data-color="yellow">
                    <strong class="block text-lg">Emergency Thermal Blankets (2-Pack)</strong>
                    <p class="text-sm text-slate-400 mb-1">Reflects 90% of body heat to prevent hypothermia.</p>
                    <span class="text-xs text-yellow-400 font-semibold">Click for details or hover for image ‚Üí</span>
                </div>

            </div>

            <div id="productDetailsView" class="hidden">
                <button id="backToProducts" class="mb-4 text-sm font-semibold text-sky-400 hover:text-sky-300 transition-colors">
                    ‚Üê Back to Products
                </button>

                <div id="detailCard" class="p-4 rounded-xl shadow-xl mb-4 border-l-8 border-emerald-500 bg-slate-900">
                    <div id="goBagImageCarouselContainer" class="w-full h-64 rounded-xl overflow-hidden hidden">
                        <div id="goBagImageCarousel" class="h-full">
                        </div>
                    </div>

                    <img id="detailImage" src="" alt="Product Detail Image" class="w-full h-auto rounded-xl shadow-xl">

                    <div class="flex justify-between items-center mt-3">
                        <div id="carouselDots" class="flex space-x-2">
                        </div>
                        <div id="goBagColorOptions" class="flex space-x-2 hidden">
                            <button data-color="stealth" class="w-6 h-6 rounded-full bg-gray-800 ring-4 ring-offset-2 ring-offset-slate-900 ring-gray-600 transition-all duration-200" title="Stealth Black"></button>
                            <button data-color="blue" class="w-6 h-6 rounded-full bg-sky-600 ring-4 ring-offset-2 ring-offset-slate-900 ring-sky-400 transition-all duration-200" title="Sea Blue"></button>

                            <button data-color="red" class="w-6 h-6 rounded-full bg-red-600 ring-4 ring-offset-2 ring-offset-slate-900 ring-red-400 transition-all duration-200" title="Safety Emergency Red"></button>
                        </div>
                    </div>
                </div>
                <h4 id="detailTitle" class="text-xl font-bold mb-2"></h4>
                <p id="detailDescription" class="text-sm text-slate-300 mb-4"></p>

                <h5 class="text-lg font-semibold mb-2">Key Features:</h5>
                <ul id="detailFeatures" class="text-sm list-disc list-inside space-y-1 text-slate-400 mb-4">
                </ul>

                <h5 class="text-lg font-semibold mb-2">Specifications:</h5>
                <ul id="detailSpecs" class="text-sm list-disc list-inside space-y-1 text-slate-400 mb-6">
                </ul>

                <p id="detailChecklist" class="text-sm text-slate-300 mb-4">
                </p>

                <button id="detailOrderButton" class="w-full mt-2 px-8 py-3 rounded-xl font-bold transition duration-300 bg-gradient-to-r from-emerald-400 to-sky-400 text-slate-900 shadow-xl shadow-emerald-500/30 hover:shadow-lg hover:from-emerald-300 hover:to-sky-300">
                    Order Now
                </button>

                <button id="detailPricesButton" class="w-full mt-2 px-8 py-3 rounded-xl font-bold transition duration-300 bg-white/5 text-slate-100 border border-slate-700 hover:bg-white/10">
                    View Prices
                </button>

                <p class="text-center text-xs text-slate-600 mt-4 pb-1">End of Details</p>
            </div>
        </div>
    </div>

    <div id="ContributionsPanel" class="slide-panel">
        <div class="flex justify-between items-center mb-6 flex-shrink-0 pt-5 pr-2">
            <h3 id="teamPanelTitle" class="text-2xl font-extrabold">üë• Team Contributions</h3>
            <button id="closeContribution" class="text-sm font-semibold text-red-400 hover:text-red-300 transition-colors">
                Close (X)
            </button>
        </div>

        <div class="space-y-4 flex-grow overflow-y-auto pr-2">
            <div id="memberListView">
                <div class="member-item p-4 bg-slate-900 rounded-xl border border-emerald-500/30 cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="pshyren" data-name="Pshyren May Viray" data-role="CEO" data-color="emerald">
                    <strong class="block text-lg text-emerald-300">CEO</strong>
                    <p class="text-base text-slate-200 mb-1">Pshyren May Viray</p>
                    <span class="text-xs text-emerald-400 font-semibold">Click for profile ‚Üí</span>
                </div>

                <div class="member-item p-4 bg-slate-900 rounded-xl border border-sky-500/30 cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="harvey" data-name="Harvey Masalihit" data-role="Web Developer" data-color="sky">
                    <strong class="block text-lg text-sky-300">Web Developer</strong>
                    <p class="text-base text-slate-200 mb-1">Harvey Masalihit</p>
                    <span class="text-xs text-sky-400 font-semibold">Click for profile ‚Üí</span>
                </div>

                <div class="member-item p-4 bg-slate-900 rounded-xl border border-pink-500/30 cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="kim" data-name="Kim Antigo" data-role="Designer" data-color="pink">
                    <strong class="block text-lg text-pink-300">Designer</strong>
                    <p class="text-base text-slate-200 mb-1">Kim Antigo</p>
                    <span class="text-xs text-pink-400 font-semibold">Click for profile ‚Üí</span>
                </div>

                <div class="member-item p-4 bg-slate-900 rounded-xl border border-indigo-500/30 cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="irald" data-name="Irald Villaflores" data-role="Product Makers" data-color="indigo">
                    <strong class="block text-lg text-indigo-300">Product Makers</strong>
                    <p class="text-base text-slate-200 mb-1">Irald Villaflores</p>
                    <span class="text-xs text-indigo-400 font-semibold">Click for profile ‚Üí</span>
                </div>

                <div class="member-item p-4 bg-slate-900 rounded-xl border border-indigo-500/30 cursor-pointer hover:bg-slate-700/50 transition-colors" data-id="sammy" data-name="Sammy Bulagao" data-role="Product Makers" data-color="indigo">
                    <strong class="block text-lg text-indigo-300">Product Makers</strong>
                    <p class="text-base text-slate-200 mb-1">Sammy Bulagao</p>
                    <span class="text-xs text-indigo-400 font-semibold">Click for profile ‚Üí</span>
                </div>
            </div>

            <div id="memberDetailsView" class="hidden">
                <button id="backToMembers" class="mb-4 text-sm font-semibold text-sky-400 hover:text-sky-300 transition-colors">
                    ‚Üê Back to Team
                </button>

                <div class="p-6 rounded-xl bg-slate-900 border" id="memberDetailCard">
                    <h4 id="memberName" class="text-2xl font-bold mb-1"></h4>
                    <p id="memberRole" class="text-lg font-semibold mb-4"></p>

                    <h5 class="text-lg font-semibold mb-2 text-slate-300">Key Contributions:</h5>
                    <p id="memberContribution" class="text-sm text-slate-400 space-y-2">
                    </p>

                    <p id="memberContact" class="mt-4 text-sm text-slate-500">
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="focusPanel" class="slide-panel">
        <div class="flex justify-between items-center mb-6 flex-shrink-0 pt-5 pr-2">
            <h3 class="text-2xl font-extrabold">üí° Why Choose us?</h3>
            <button id="closeFocus" class="text-sm font-semibold text-red-400 hover:text-red-300 transition-colors">
                Close (X)
            </button>
        </div>

        <div class="flex-grow overflow-y-auto pr-2 space-y-6">
            <div class="p-6 rounded-xl bg-slate-900 border border-indigo-500/30">
                <h4 class="text-xl font-bold text-indigo-300 mb-3">üõ°Ô∏è ALL-IN: TOTAL EMERGENCY COVERAGE</h4>
                <p class="text-sm text-slate-300">
                    Stop worrying about missing essential items. Power, survival, and first aid‚Äîwe've secured everything you need in one professional kit.
                </p>
            </div>

            <div class="p-6 rounded-xl bg-slate-900 border border-indigo-500/30">
                <h4 class="text-xl font-bold text-indigo-300 mb-3">üéØ ZERO TIME WASTED: GRAB. GO. SURVIVE.</h4>
                <p class="text-sm text-slate-300">
                    When seconds count, you won't be assembling or searching. Our bag is 100% pre-packed and ready for immediate use in any crisis.
                </p>
            </div>

            <div class="p-6 rounded-xl bg-slate-900 border border-indigo-500/30">
                <h4 class="text-xl font-bold text-indigo-300 mb-3">‚ö° PREPAREDNESS YOU CAN AFFORD</h4>
                <p class="text-sm text-slate-300">
                    True safety shouldn't break the bank. Get high-quality, reliable gear that fits the Filipino budget, making safety accessible to every family. </p>
            </div>
        </div>
    </div>

    <div id="pricePanel" class="slide-panel">
        <div class="flex justify-between items-center mb-6 flex-shrink-0 pt-5 pr-2">
            <h3 class="text-2xl font-extrabold">üí≤ Pricing</h3>
            <button id="closePrice" class="text-sm font-semibold text-red-400 hover:text-red-300 transition-colors">
                Close (X)
            </button>
        </div>

        <div class="flex-grow overflow-y-auto pr-2 space-y-6">
            <div class="p-6 rounded-xl bg-slate-900 border border-emerald-500/30">
                <h4 class="text-lg font-bold text-emerald-300 mb-2">Standard</h4>
                <p id="priceStandardEl" class="text-xl font-extrabold text-slate-100">P2,999.00</p>
                <button id="orderStandardButton" class="mt-3 px-4 py-2 rounded-lg bg-emerald-400 text-slate-900 font-semibold">Order Standard</button>
            </div>

            <div class="p-6 rounded-xl bg-slate-900 border border-emerald-500/30">
                <h4 class="text-lg font-bold text-emerald-300 mb-2">Bundle</h4>
                <p id="priceBundleEl" class="text-xl font-extrabold text-slate-100">P2,699.00</p>
                <button id="orderBundleButton" class="mt-3 px-4 py-2 rounded-lg bg-emerald-400 text-slate-900 font-semibold">Order Bundle</button>
            </div>

            <div class="p-6 rounded-xl bg-slate-900 border border-emerald-500/30">
                <h4 class="text-lg font-bold text-emerald-300 mb-2">LGU</h4>
                <p id="priceLGUEl" class="text-xl font-extrabold text-slate-100">P2,400.00 / P2,000.00</p>
                <button id="orderLGUButton" class="mt-3 px-4 py-2 rounded-lg bg-emerald-400 text-slate-900 font-semibold">Order LGU</button>
            </div>
        </div>
    </div>

    <!-- Feedback Panel -->
    <div id="feedbackPanel" class="slide-panel">
        <div class="flex justify-between items-center mb-6 flex-shrink-0 pt-5 pr-2">
            <h3 class="text-2xl font-extrabold">üí¨ Send Feedback</h3>
            <button id="closeFeedback" class="text-sm font-semibold text-red-400 hover:text-red-300 transition-colors">
                Close (X)
            </button>
        </div>

        <form id="feedbackForm" class="flex-grow overflow-y-auto pr-2 space-y-4">
            <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Your Name</label>
                <input type="text" id="feedbackName" placeholder="e.g., John Doe" class="w-full px-4 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-100 placeholder-slate-500 focus:outline-none focus:border-emerald-400">
            </div>

            <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Email</label>
                <input type="email" id="feedbackEmail" placeholder="e.g., john@example.com" class="w-full px-4 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-100 placeholder-slate-500 focus:outline-none focus:border-emerald-400">
            </div>

            <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Rating</label>
                <select id="feedbackRating" class="w-full px-4 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-100 focus:outline-none focus:border-emerald-400">
                    <option value="">Select a rating...</option>
                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent</option>
                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Very Good</option>
                    <option value="3">‚≠ê‚≠ê‚≠ê Good</option>
                    <option value="2">‚≠ê‚≠ê Fair</option>
                    <option value="1">‚≠ê Poor</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Message</label>
                <textarea id="feedbackMessage" placeholder="Share your thoughts, suggestions, or feedback..." rows="5" class="w-full px-4 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-100 placeholder-slate-500 focus:outline-none focus:border-emerald-400 resize-none"></textarea>
            </div>

            <button type="submit" class="w-full px-4 py-3 rounded-lg bg-emerald-400 text-slate-900 font-bold hover:bg-emerald-300 transition-colors">Send Feedback</button>
        </form>
    </div>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        // --- Data Definitions (Updated for Go Bag Colors) ---
        const productData = {
            goBag: {
                title: "Smart Disaster Go Bag",
                description: "The ultimate emergency readiness kit. Engineered for the modern environment, the Smart Go Bag goes beyond basic survival with integrated technology to keep you and your family safe and connected. **Includes: Smart Tracker, Integrated Solar Panel, 5-in-1 Tool, First Aid Kit, Non-Perishable Rations.**",
                image: {
                    stealth: "black.png", // Placeholder image for Stealth Black
                    blue: "blue.png", // Placeholder image for Sea Blue (The default image you had)
                    red: "red.png" // Placeholder image for Safety Emergency Red
                },
                colorOrder: ['stealth', 'blue', 'red'], // Defines the order of images in the carousel
                color: "emerald", // Default color for list item border
                features: [
                    "Standard",
                    "GPS/Bluetooth Tracker: Quickly locate the bag in low-light or stressful situations.",
                    "Integrated Solar Panel: Emergency charging for your devices.",
                    "Water-Resistant Shell: Protects contents from rain and splashes.",
                    "5-in-1 Multi-Tool: Essential for utility and repairs.",
                    "First Aid Kit: Comprehensive medical supplies.",
                    "Non-Perishable Rations: Enough for 72 hours.",
                    "Bundle",
                    "All features of Standard, Minor discount for Minor discount for, Same inclusions, lower price"
                ],
                specs: [
                    "Dimensions: 18\" x 12\" x 8\" (Compact and easy to carry)",
                    "Weight (Fully Packed): Approx 5 kg",
                    "Material: 1000D Nylon, tear and abrasion resistant.",
                    "Waterproof Rating: IPX5 (resistant to low-pressure water jets).",
                    "Available Colors: Stealth Black, Ocean Blue, Emergency Red."
                ],
                checklist: "We recommend adding personal documents (copies), cash, and essential medications to the bag upon purchase. Rotate your non-perishable rations every 6 months to ensure freshness.",

                priceStandard: "P2,999.00",
                priceBundle: "P2,699.00",
                priceLGUEl: "2,400.00/2,000.00"
            },
            powerbank: {
                title: "High-Capacity Solar Powerbank",
                description: "Never run out of juice. This power bank features a massive capacity and integrated solar panels, ensuring your essential communication devices stay charged even during prolonged outages. **Perfect for prolonged power outages and camping.**",
                image: "sollar.png",
                color: "sky",
                features: [
                    "20000mAh Capacity: Up to 5 full phone charges.",
                    "Foldable Solar Panel: Recharges the unit using sunlight.",
                    "Dual USB Ports: Charge two devices simultaneously.",
                    "Built-in LED Flashlight: Emergency lighting feature.",
                    "Ruggedized Casing: Drop and dust resistant."
                ],
                specs: [
                    "Capacity: 20,000 mAh",
                    "Input: Micro USB, USB-C, Solar",
                    "Output: 5V/2.1A (Max)",
                    "Material: ABS+PC+Silicone",
                    "Weight: 450g"
                ],
                checklist: "Keep the powerbank fully charged at all times. Store in a cool, dry place.",
                price: "P1000.00"
            },
            radio: {
                title: "Emergency Mini Radio",
                description: "Stay informed when all other lines of communication fail. This compact radio is powered by a hand-crank and solar power, ensuring you can receive crucial weather and emergency alerts anytime, anywhere. **A must-have for every emergency kit.**",
                image: "radio.png",
                color: "indigo",
                features: [
                    "AM/FM/NOAA Weather Bands: Get all essential frequencies.",
                    "Hand-Crank Dynamo: Never worry about dead batteries.",
                    "Solar and USB Charging: Multiple power options.",
                    "Integrated Flashlight: Provides emergency illumination.",
                    "Siren Function: For signaling help."
                ],
                specs: [
                    "Bands: AM (520-1710KHz), FM (87-108MHz), NOAA Weather",
                    "Power Sources: Hand-crank, Solar Panel, 5V Micro USB",
                    "Dimensions: 128 x 60 x 45mm",
                    "Battery: 2000mAh Li-ion"
                ],
                checklist: "Test the crank and solar features monthly. Ensure the antenna is fully extended for best reception.",
                price: "P600.00"
            },
            waterFilter: {
                title: "Portable Water Filter Straw",
                description: "Access safe drinking water instantly from almost any fresh water source. This lightweight and compact filter is essential for survival in the wilderness or during long-term emergencies. **Filters up to 1,500 liters of water.**",
                image: "water.png",
                color: "gray",
                features: [
                    "Filters up to 1,500 Liters: Long-lasting utility.",
                    "Removes 99.9999% of Waterborne Bacteria: Ensures safety.",
                    "Chemical-Free Purification: Simple and effective.",
                    "Compact and Lightweight: Easy to carry in a pocket or bag.",
                    "High Flow Rate: Quick access to clean water."
                ],
                specs: [
                    "Filtration Capacity: 1,500 Liters",
                    "Filtration: Hollow Fiber Ultrafiltration Membrane",
                    "Size: 18cm x 2.5cm",
                    "Weight: 55g",
                    "Pore Size: 0.01 micron"
                ],
                checklist: "After each use, backflush with clean water. Do not allow the filter to freeze.",
                price: "P450.00"
            },
            blankets: {
                title: "Emergency Thermal Blankets (2-Pack)",
                description: "Mylar blankets are crucial for retaining body heat in cold or wet conditions. They are lightweight, reusable, and a vital addition to any kit. **Compactly folded and ready for immediate use.**",
                image: "emergency.png",
                color: "yellow",
                features: [
                    "Retains 90% of Body Heat: Prevents hypothermia.",
                    "Waterproof and Windproof: Full protection from elements.",
                    "Lightweight and Durable: Reusable and easy to pack.",
                    "Can be used as a ground cover or signal mirror.",
                    "Two blankets included per pack."
                ],
                specs: [
                    "Material: Mylar (Polyethylene Terephthalate)",
                    "Dimensions (Unfolded): 52\" x 82\" (132cm x 210cm)",
                    "Weight: 60g per blanket",
                    "Color: Silver/Orange (Dual-sided)"
                ],
                checklist: "Practice unfolding and refolding. Store in a cool, dry place away from sharp objects.",
                price: "P250.00"
            }
        };

        const memberData = {
            pshyren: {
                name: "Pshyren May Viray",
                role: "CEO & Project Lead",
                color: "emerald",
                contribution: `<p><strong>Oversaw overall project direction and business strategy.</strong></p>
                            <p>Handled all administrative tasks and coordination. Defined the core vision of 'Tech Safe' as a solution-oriented emergency brand.</p>`,
                contact: "Email: pshyrenviray@gmail.com | LinkedIn: /in/pshyren"
            },
            harvey: {
                name: "Harvey Masalihit",
                role: "Web Developer",
                color: "sky",
                contribution: `<p><strong>Implemented all front-end code (HTML, CSS/Tailwind, JS).</strong></p>
                            <p>Developed interactive features, including the sliding product and team panels, and ensured full responsiveness across devices.</p>`,
                contact: "Email: harveymasalihit33@gmail.com | GitHub: Harb404"
            },
            kim: {
                name: "Kim Antigo",
                role: "Designer & Content Creator",
                color: "pink",
                contribution: `<p><strong>Designed the UI/UX mockups and created brand assets.</strong></p>
                            <p>Wrote the product descriptions and marketing copy. Ensured visual consistency across the entire website, including color schemes and typography.</p>`,
                contact: "Email: kimantigogmail.com | Portfolio: /kim-design"
            },
            irald: {
                name: "Irald Villaflores",
                role: "Product Makers",
                color: "indigo",
                contribution: `<p><strong>Researched and specified product components for the Smart Go Bag.</strong></p>
                            <p>Sourced potential suppliers for the solar powerbank and tracking device. Built the initial prototypes for the go bag.</p>`,
                contact: "Email: iraldvillaflores@gmail.com"
            },
            sammy: {
                name: "Sammy Bulagao",
                role: "Product Makers",
                color: "indigo",
                contribution: `<p><strong>Assisted in assembly and quality control of the Go Bag prototypes.</strong></p>
                            <p>Conducted field testing for durability and water resistance. Developed the initial Go Bag checklist and user manual content.</p>`,
                contact: "Email: sammybulagao@gmail.com"
            }
        };


        // --- DOM Elements ---
        const exploreButton = document.getElementById('exploreButton');
        const openProductsButton = document.getElementById('openProducts');
        const productPanel = document.getElementById('productPanel');
        const closeProductButton = document.getElementById('closeProduct');
        const productListView = document.getElementById('productListView');
        const productDetailsView = document.getElementById('productDetailsView');
        const backToProductsButton = document.getElementById('backToProducts');
        const detailOrderButton = document.getElementById('detailOrderButton'); // NEW ELEMENT
        const detailTitle = document.getElementById('detailTitle');
        const detailDescription = document.getElementById('detailDescription');
        const detailFeatures = document.getElementById('detailFeatures');
        const detailSpecs = document.getElementById('detailSpecs');
        const detailChecklist = document.getElementById('detailChecklist');
        const detailImage = document.getElementById('detailImage');
        const detailCard = document.getElementById('detailCard');

        const imagePreview = document.getElementById('imagePreview');
        const previewImage = document.getElementById('previewImage');
        const previewTitle = document.getElementById('previewTitle');

        const openMembersButton = document.getElementById('openMembers');
        const contributionsPanel = document.getElementById('ContributionsPanel');
        const closeContributionButton = document.getElementById('closeContribution');
        const memberListView = document.getElementById('memberListView');
        const memberDetailsView = document.getElementById('memberDetailsView');
        const backToMembersButton = document.getElementById('backToMembers');
        const memberDetailCard = document.getElementById('memberDetailCard');
        const memberName = document.getElementById('memberName');
        const memberRole = document.getElementById('memberRole');
        const memberContribution = document.getElementById('memberContribution');

        const openFocusButton = document.getElementById('openFocus');
        const focusPanel = document.getElementById('focusPanel');
        const closeFocusButton = document.getElementById('closeFocus');
        const memberContact = document.getElementById('memberContact');

        const goBagImageCarousel = document.getElementById('goBagImageCarousel');
        const goBagImageCarouselContainer = document.getElementById('goBagImageCarouselContainer');
        const carouselDots = document.getElementById('carouselDots');
        const goBagColorOptions = document.getElementById('goBagColorOptions');
        let currentCarouselIndex = 0;
        let currentProductId = null; // Track which product is currently shown in the details view

        // Price panel elements (for viewing Standard / Bundle prices)
        const pricePanel = document.getElementById('pricePanel');
        const closePriceButton = document.getElementById('closePrice');
        const detailPricesButton = document.getElementById('detailPricesButton');
        const priceStandardEl = document.getElementById('priceStandardEl');
        const priceBundleEl = document.getElementById('priceBundleEl');
        const priceLGUEl = document.getElementById('priceLGUEl');
        const orderStandardButton = document.getElementById('orderStandardButton');
        const orderBundleButton = document.getElementById('orderBundleButton');
        const orderLGUButton = document.getElementById('orderLGUButton');

        // Feedback panel elements
        const feedbackPanel = document.getElementById('feedbackPanel');
        const closeFeedbackButton = document.getElementById('closeFeedback');
        const feedbackForm = document.getElementById('feedbackForm');
        const feedbackName = document.getElementById('feedbackName');
        const feedbackEmail = document.getElementById('feedbackEmail');
        const feedbackRating = document.getElementById('feedbackRating');
        const feedbackMessage = document.getElementById('feedbackMessage');

        // Hero and overlay (PIP) videos
        const heroVideo = document.getElementById('heroVideo');
        const pipVideo = document.getElementById('pipVideo');

        // Keep pipVideo roughly in sync with heroVideo
        if (heroVideo && pipVideo) {
            heroVideo.addEventListener('play', () => {
                try {
                    pipVideo.currentTime = heroVideo.currentTime;
                } catch (e) {}
                pipVideo.play().catch(() => {});
            });
            heroVideo.addEventListener('pause', () => pipVideo.pause());
            heroVideo.addEventListener('seeked', () => {
                try {
                    pipVideo.currentTime = heroVideo.currentTime;
                } catch (e) {}
            });

            // When the hero video ends, show the gallery (videos stay hidden)
            const postVideoGallery = document.getElementById('postVideoGallery');
            const replayVideoBtn = document.getElementById('replayVideoBtn');

            heroVideo.addEventListener('ended', () => {
                // hide videos
                heroVideo.classList.add('hidden');
                pipVideo.classList.add('hidden');

                // show gallery; ensure replay button remains hidden
                if (postVideoGallery) postVideoGallery.classList.remove('hidden');
                if (replayVideoBtn) replayVideoBtn.classList.add('hidden');

                // Initialize looping gallery and start auto-scroll (user interaction will stop/respect it)
                try {
                    setupLoopingGallery(postVideoGallery);
                    // start auto-scroll at ~60px/sec
                    startAutoScroll(postVideoGallery, 60);

                    // track whether the user interacted to prevent automatic resume
                    let userInteracted = false;

                    // After 8s stop the auto-scroll and resume the videos (creates loop)
                    let resumeTimer = setTimeout(() => {
                        // If user already interacted, do not resume videos
                        if (userInteracted) return;
                        try {
                            stopAutoScroll(postVideoGallery);
                        } catch (e) {}
                        if (postVideoGallery) postVideoGallery.classList.add('hidden');
                        heroVideo.classList.remove('hidden');
                        pipVideo.classList.remove('hidden');
                        try {
                            heroVideo.currentTime = 0;
                            heroVideo.play().catch(() => {});
                        } catch (e) {}
                        try {
                            pipVideo.currentTime = 0;
                            pipVideo.play().catch(() => {});
                        } catch (e) {}
                    }, 8000);

                    // If user interacts with the gallery, stop auto-scroll and cancel the resume
                    const cancelOnUser = () => {
                        userInteracted = true;
                        try {
                            // If transform-based auto-scroll was active, map transform position to scrollLeft
                            const inner = postVideoGallery.querySelector('div');
                            if (inner) {
                                const st = window.getComputedStyle(inner);
                                const tr = st.transform || '';
                                let tx = 0;
                                if (tr && tr !== 'none') {
                                    // matrix(a, b, c, d, tx, ty)
                                    const parts = tr.match(/matrix\((.+)\)/);
                                    if (parts && parts[1]) {
                                        const nums = parts[1].split(',').map(s => parseFloat(s.trim()));
                                        if (nums.length >= 6) tx = nums[4];
                                    }
                                }
                                const total = inner.scrollWidth || 0;
                                const originalWidth = total / 2 || total;
                                const offset = Math.abs(tx) % originalWidth;
                                // stop auto-scroll then clear transform so manual scroll works
                                try {
                                    stopAutoScroll(postVideoGallery);
                                } catch (e) {}
                                inner.style.transform = '';
                                // Position the native scroll to match visual position
                                try {
                                    postVideoGallery.scrollLeft = offset;
                                } catch (e) {}
                            } else {
                                try {
                                    stopAutoScroll(postVideoGallery);
                                } catch (e) {}
                            }
                        } catch (e) {}
                        try {
                            clearTimeout(resumeTimer);
                        } catch (e) {}
                    };

                    // Listen for various user interaction events to reliably detect intent.
                    // Treat only actual drag/scroll gestures as user interaction ‚Äî simple clicks/taps on images should NOT cancel the animation.
                    (function addGestureDetection(el, onUser) {
                        // Wheel always counts as interaction
                        el.addEventListener('wheel', onUser, {
                            once: true,
                            passive: true
                        });

                        // For pointer (mouse) interactions: detect movement between pointerdown and pointerup
                        const onPointerDown = (e) => {
                            let moved = false;
                            const moveHandler = () => {
                                moved = true;
                            };
                            const upHandler = () => {
                                el.removeEventListener('pointermove', moveHandler);
                                el.removeEventListener('pointerup', upHandler);
                                el.removeEventListener('pointercancel', upHandler);
                                if (moved) onUser();
                            };
                            el.addEventListener('pointermove', moveHandler, {
                                passive: true
                            });
                            el.addEventListener('pointerup', upHandler, {
                                once: true
                            });
                            el.addEventListener('pointercancel', upHandler, {
                                once: true
                            });
                        };
                        el.addEventListener('pointerdown', onPointerDown, {
                            passive: true
                        });

                        // For touch interactions: detect touchmove
                        const onTouchStart = (e) => {
                            let moved = false;
                            const touchMove = () => {
                                moved = true;
                            };
                            const touchEnd = () => {
                                el.removeEventListener('touchmove', touchMove);
                                el.removeEventListener('touchend', touchEnd);
                                el.removeEventListener('touchcancel', touchEnd);
                                if (moved) onUser();
                            };
                            el.addEventListener('touchmove', touchMove, {
                                passive: true
                            });
                            el.addEventListener('touchend', touchEnd, {
                                once: true
                            });
                            el.addEventListener('touchcancel', touchEnd, {
                                once: true
                            });
                        };
                        el.addEventListener('touchstart', onTouchStart, {
                            passive: true
                        });

                        // Also listen for programmatic/native scroll events as a fallback
                        el.addEventListener('scroll', onUser, {
                            once: true,
                            passive: true
                        });
                    })(postVideoGallery, cancelOnUser);
                } catch (e) {}
            });

            // Periodic drift correction
            setInterval(() => {
                if (!heroVideo.paused && !pipVideo.paused) {
                    const d = Math.abs(heroVideo.currentTime - pipVideo.currentTime);
                    if (d > 0.15) {
                        try {
                            pipVideo.currentTime = heroVideo.currentTime;
                        } catch (e) {}
                    }
                }
            }, 500);
        }

        // Model image picker removed

        // Setup an infinite (wrap-around) gallery so users can manually scroll without visible scrollbars
        function setupLoopingGallery(gallery) {
            if (!gallery || gallery.dataset.loopInitialized) return;
            const inner = gallery.querySelector('div');
            if (!inner) return;

            // Measure original width before duplicating
            const originalWidth = inner.scrollWidth;
            if (!originalWidth) return;

            // Duplicate the inner content to allow seamless wrap-around
            inner.innerHTML = inner.innerHTML + inner.innerHTML;

            // Start scroll at the beginning (transform-based auto-scroll will control movement)
            gallery.scrollLeft = 0;

            // Hide native scrollbars but allow scrolling
            gallery.classList.add('no-scrollbar');

            // Mark initialized
            gallery.dataset.loopInitialized = '1';

            // On scroll, wrap when reaching either end
            gallery.addEventListener('scroll', () => {
                const total = inner.scrollWidth;
                const half = total / 2;
                if (gallery.scrollLeft <= 0) {
                    gallery.scrollLeft += half;
                } else if (gallery.scrollLeft >= total - gallery.clientWidth - 1) {
                    gallery.scrollLeft -= half;
                }
            }, {
                passive: true
            });
        }

        // Start auto-scrolling the gallery to the left using transform for smooth animation.
        // Stops when user interacts.
        function startAutoScroll(gallery, pxPerSecond = 60) {
            if (!gallery) return;
            // prevent multiple RAF loops
            if (gallery._autoScrollRaf) return;

            const inner = gallery.querySelector('div');
            if (!inner) return;

            // total width (after duplication, so inner contains two copies)
            const total = inner.scrollWidth;
            const originalWidth = total / 2 || total;

            let last = performance.now();
            let offset = 0; // pixels scrolled into the first copy

            inner.style.willChange = 'transform';

            function step(now) {
                const dt = now - last;
                last = now;
                const delta = (pxPerSecond * dt) / 1000;
                offset += delta;

                // wrap offset to stay within the first copy width
                if (offset >= originalWidth) {
                    offset -= originalWidth;
                }

                // translate the inner track left by offset
                inner.style.transform = `translateX(-${Math.round(offset)}px)`;

                gallery._autoScrollRaf = requestAnimationFrame(step);
            }

            // stop auto-scroll on user interaction
            const stopOnUser = () => stopAutoScroll(gallery);
            gallery.addEventListener('pointerdown', stopOnUser, {
                once: true
            });
            gallery.addEventListener('touchstart', stopOnUser, {
                once: true,
                passive: true
            });
            gallery.addEventListener('wheel', stopOnUser, {
                once: true,
                passive: true
            });

            gallery._autoScrollRaf = requestAnimationFrame(step);
        }

        function stopAutoScroll(gallery) {
            if (!gallery) return;
            if (gallery._autoScrollRaf) {
                cancelAnimationFrame(gallery._autoScrollRaf);
                gallery._autoScrollRaf = null;
            }
        }

        // --- General Functions ---

        function closeAllPanels() {
            productPanel.classList.remove('open');
            contributionsPanel.classList.remove('open');
            focusPanel.classList.remove('open');
            pricePanel.classList.remove('open');
            feedbackPanel.classList.remove('open');
            imagePreview.classList.remove('visible');
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        function openPanel(panel) {
            closeAllPanels(); // Close others just in case
            panel.classList.add('open');
            document.body.style.overflow = 'hidden'; // Prevent main page scrolling while panel is open
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
            // Also close the product panel when we scroll to order
            if (id === 'order') {
                closeAllPanels();
            }
        }

        // --- Carousel Logic (for Smart Go Bag) ---

        function renderGoBagCarousel() {
            const data = productData.goBag;
            goBagImageCarousel.innerHTML = '';
            carouselDots.innerHTML = '';

            data.colorOrder.forEach((color, index) => {
                // 1. Image
                const img = document.createElement('img');
                img.src = data.image[color];
                img.alt = `${data.title} - ${color}`;
                img.classList.add('object-cover', 'h-full', 'w-full');
                goBagImageCarousel.appendChild(img);

                // 2. Dot
                const dot = document.createElement('div');
                dot.classList.add('w-2', 'h-2', 'rounded-full', 'bg-slate-500/50', 'cursor-pointer', 'transition-colors');
                if (index === 0) {
                    dot.classList.remove('bg-slate-500/50');
                    dot.classList.add('bg-sky-400');
                }
                dot.onclick = () => showCarouselImage(index);
                carouselDots.appendChild(dot);
            });

            // 3. Color buttons (Optional - you can implement logic to switch colors here)
            // For now, they only set the ring color/title based on the colorOrder
            const colorButtons = goBagColorOptions.querySelectorAll('button');
            colorButtons.forEach(button => {
                button.onclick = () => {
                    const color = button.dataset.color;
                    const index = data.colorOrder.indexOf(color);
                    if (index !== -1) {
                        showCarouselImage(index);
                    }
                };
            });
        }

        function showCarouselImage(index) {
            const data = productData.goBag;
            const numImages = data.colorOrder.length;
            if (index < 0) {
                index = numImages - 1;
            } else if (index >= numImages) {
                index = 0;
            }
            currentCarouselIndex = index;
            goBagImageCarousel.style.transform = `translateX(-${currentCarouselIndex * 33.3333}%)`;

            // Update dots
            carouselDots.querySelectorAll('div').forEach((dot, i) => {
                dot.classList.remove('bg-sky-400');
                dot.classList.add('bg-slate-500/50');
                if (i === currentCarouselIndex) {
                    dot.classList.remove('bg-slate-500/50');
                    dot.classList.add('bg-sky-400');
                }
            });

            // Update color option ring
            goBagColorOptions.querySelectorAll('button').forEach((button, i) => {
                button.classList.remove('ring-sky-400', 'ring-emerald-400', 'ring-orange-400', 'ring-gray-400', 'ring-red-400');
                if (i === currentCarouselIndex) {
                    const color = data.colorOrder[i];
                    // Example mapping for ring color based on data-color
                    const ringColorMap = {
                        'stealth': 'ring-gray-400',
                        'blue': 'ring-sky-400',
                        'orange': 'ring-orange-400',
                        'red': 'ring-red-400'
                    };
                    button.classList.add(ringColorMap[color] || 'ring-white/50');
                }
            });
        }


        // --- Event Listeners ---

        // 1. FIX: Change explore button to open the product panel
        exploreButton.addEventListener('click', () => {
            openPanel(productPanel);
        });

        // 2. Add listener to the Order button inside product details
        detailOrderButton.addEventListener('click', () => {
            // Get the current product's title and pre-fill the order form
            const productTitle = detailTitle.textContent;
            document.getElementById('product').value = productTitle;

            scrollToSection('order');
        });

        // Open Products Panel from About section
        openProductsButton.addEventListener('click', () => {
            openPanel(productPanel);
            // Default to list view when opened
            productListView.classList.remove('hidden');
            productDetailsView.classList.add('hidden');
        });

        // Close Products Panel
        closeProductButton.addEventListener('click', () => {
            closeAllPanels();
        });

        // Back button in Products Panel
        backToProductsButton.addEventListener('click', () => {
            productListView.classList.remove('hidden');
            productDetailsView.classList.add('hidden');
            detailCard.classList.remove('border-sky-500', 'border-indigo-500', 'border-gray-500', 'border-yellow-500', 'border-emerald-500');
            detailCard.classList.add('border-l-8', 'border-emerald-500'); // Reset border for next selection
            goBagImageCarouselContainer.classList.add('hidden');
            detailImage.classList.remove('hidden');
            goBagColorOptions.classList.add('hidden');
            carouselDots.classList.add('hidden');
        });

        // Product Item Click (Open Details)
        document.querySelectorAll('.product-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                                const id = item.dataset.id;
                                const data = productData[id];

                                // Set content
                                detailTitle.textContent = data.title;
                                detailDescription.innerHTML = data.description.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                                detailChecklist.textContent = data.checklist;
                                detailOrderButton.textContent = `Order ${data.title} (${data.price})`;

                                // Set the border color of the detail card
                                detailCard.classList.remove('border-sky-500', 'border-indigo-500', 'border-gray-500', 'border-yellow-500', 'border-emerald-500');
                                detailCard.classList.add(`border-${data.color}-500`);

                                // Handle Go Bag (with carousel) or single image products
                                if (id === 'goBag') {
                                    goBagImageCarouselContainer.classList.remove('hidden');
                                    detailImage.classList.add('hidden');
                                    goBagColorOptions.classList.remove('hidden');
                                    carouselDots.classList.remove('hidden');
                                    renderGoBagCarousel(); // Render/reset the carousel
                                    showCarouselImage(0); // Show the first image
                                } else {
                                    goBagImageCarouselContainer.classList.add('hidden');
                                    detailImage.classList.remove('hidden');
                                    detailImage.src = data.image;
                                    goBagColorOptions.classList.add('hidden');
                                    carouselDots.classList.add('hidden');
                                }

                                // Features list ‚Äî make the "Standard" and "Bundle" labels slightly larger by wrapping them
                                detailFeatures.innerHTML = data.features.map(f => `
                    <li>${(['Standard','Bundle'].includes(f) ? `<span class="standard-label">${f}</span>` : f)}</li>
                `).join('');

                // Specs list
                detailSpecs.innerHTML = data.specs.map(s => `<li>${s}</li>`).join('');

                // Switch views
                productListView.classList.add('hidden');
                productDetailsView.classList.remove('hidden');
            });

            // Hover effects for image preview
            item.addEventListener('mouseenter', (e) => {
                if (!productDetailsView.classList.contains('hidden')) return; // Don't show preview if in detail view

                const id = item.dataset.id;
                currentProductId = id; // remember which product we're viewing in details
                const data = productData[id];
                const rect = productPanel.getBoundingClientRect();

                // Only show a single image if not the Go Bag, or the first image of the Go Bag
                previewImage.src = (id === 'goBag' ? data.image[data.colorOrder[0]] : data.image);
                previewTitle.textContent = data.title;
                imagePreview.classList.add('visible');
            });

            item.addEventListener('mouseleave', () => {
                imagePreview.classList.remove('visible');
            });
        });

        // Open Members Panel from About section
        openMembersButton.addEventListener('click', () => {
            openPanel(contributionsPanel);
            // Default to list view when opened
            memberListView.classList.remove('hidden');
            memberDetailsView.classList.add('hidden');
        });

        // Close Contributions Panel
        closeContributionButton.addEventListener('click', () => {
            closeAllPanels();
        });

        // Key Focus Panel Listeners
        openFocusButton.addEventListener('click', () => {
            openPanel(focusPanel);
        });

        closeFocusButton.addEventListener('click', () => {
            closeAllPanels();
        });

        // Pricing panel listeners
        detailPricesButton.addEventListener('click', () => {
            if (!currentProductId) return;
            const data = productData[currentProductId];
            // Populate prices (fallback to generic price string)
            priceStandardEl.textContent = data.priceStandard || data.price || 'N/A';
            priceBundleEl.textContent = data.priceBundle || data.price || 'N/A';
            priceLGUEl.textContent = data.priceLGUEl || data.price || 'N/A';
            openPanel(pricePanel);
        });

        closePriceButton.addEventListener('click', () => {
            closeAllPanels();
        });

        // Feedback button listener
        document.getElementById('feedbackButton').addEventListener('click', () => {
            openPanel(feedbackPanel);
        });

        // Feedback panel handlers
        closeFeedbackButton.addEventListener('click', () => {
            closeAllPanels();
        });

        feedbackForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const name = feedbackName.value.trim();
            const email = feedbackEmail.value.trim();
            const rating = feedbackRating.value;
            const message = feedbackMessage.value.trim();

            // Simple validation
            if (!name || !email || !rating || !message) {
                alert('Please fill in all fields.');
                return;
            }

            // Prepare feedback data
            const feedbackData = {
                name: name,
                email: email,
                rating: rating,
                message: message,
                timestamp: new Date().toLocaleString()
            };

            // Log to console (in production, send to a backend service)
            console.log('Feedback submitted:', feedbackData);

            // Optional: Send to a backend endpoint
            // fetch('/api/feedback', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify(feedbackData)
            // }).then(r => r.json()).catch(err => console.error(err));

            // Show success message and reset form
            alert('Thank you for your feedback! We appreciate your input.');
            feedbackForm.reset();
            closeAllPanels();
        });

        orderStandardButton.addEventListener('click', () => {
            if (!currentProductId) return;
            const data = productData[currentProductId];
            document.getElementById('product').value = `${data.title} (Standard)`;
            closeAllPanels();
            scrollToSection('order');
        });

        orderBundleButton.addEventListener('click', () => {
            if (!currentProductId) return;
            const data = productData[currentProductId];
            document.getElementById('product').value = `${data.title} (Bundle)`;
            closeAllPanels();
            scrollToSection('order');
        });

        orderLGUButton.addEventListener('click', () => {
            if (!currentProductId) return;
            const data = productData[currentProductId] || {};
            const title = (data.title || '').trim() || 'Smart Disaster Go Bag';
            document.getElementById('product').value = `${title} (LGU)`;
            closeAllPanels();
            scrollToSection('order');
        });

        // Back button in Contributions Panel
        backToMembersButton.addEventListener('click', () => {
            memberListView.classList.remove('hidden');
            memberDetailsView.classList.add('hidden');
            memberDetailCard.classList.remove('border-l-8', 'border-emerald-500', 'border-sky-500', 'border-pink-500', 'border-indigo-500');
            memberDetailCard.classList.add('border-l-8', 'border-slate-500'); // Reset default border
        });

        // Member Item Click (Open Details)
        document.querySelectorAll('.member-item').forEach(item => {
            item.addEventListener('click', () => {
                const id = item.dataset.id;
                const data = memberData[id];

                // Set content
                memberName.textContent = data.name;
                memberRole.textContent = data.role;
                memberContribution.innerHTML = data.contribution;
                memberContact.textContent = data.contact;

                // Set the border color of the detail card
                memberDetailCard.classList.remove('border-emerald-500', 'border-sky-500', 'border-pink-500', 'border-indigo-500');
                memberDetailCard.classList.add(`border-${data.color}-500`);

                // Switch views
                memberListView.classList.add('hidden');
                memberDetailsView.classList.remove('hidden');
            });
        });

        // Form Submission (Placeholder)
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            document.getElementById('successMessage').classList.remove('hidden');
            // In a real application, you would send this data to a server here.
            setTimeout(() => {
                document.getElementById('successMessage').classList.add('hidden');
                this.reset();
            }, 5000);
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('#mainNav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                scrollToSection(targetId);
            });
        });
    </script>
</body>

</html>
